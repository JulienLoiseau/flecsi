

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Meyer’s Singleton &mdash; FleCSI 2.-1 (devel) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://flecsi.orgsrc/developer-guide/patterns/meyers_singleton.html"/>
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/flecsi.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Version: 2.-1 (devel)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build.html">Build &amp; Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user-guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-guide.html">Core Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="http://laristra.github.io/flecsi/doxygen">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../team.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">FleCSI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>Meyer’s Singleton</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/src/developer-guide/patterns/meyers_singleton.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="meyer-s-singleton">
<h1>Meyer’s Singleton<a class="headerlink" href="#meyer-s-singleton" title="Permalink to this headline">¶</a></h1>
<p>A singleton is a type instance for which there is one, and only one,
object in the system:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">singleton_t</span>
<span class="p">{</span>

  <span class="k">static</span>
  <span class="n">singleton_t</span> <span class="o">&amp;</span>
  <span class="n">instance</span><span class="p">()</span>
  <span class="p">{</span>
    <span class="k">static</span> <span class="n">singleton_t</span> <span class="n">s</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">s</span><span class="p">;</span>
  <span class="p">}</span> <span class="c1">// instance</span>

  <span class="n">singleton_t</span><span class="p">(</span><span class="k">const</span> <span class="n">singleton_t</span> <span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
  <span class="n">singleton_t</span> <span class="o">&amp;</span> <span class="k">operator</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="n">singleton_t</span> <span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>

  <span class="n">singleton_t</span><span class="p">()</span> <span class="p">{}</span>
  <span class="o">~</span><span class="n">singleton_t</span><span class="p">()</span> <span class="p">{}</span>

<span class="p">};</span> <span class="c1">// struct singleton_t</span>
</pre></div>
</div>
<p>Attributed to Scott Meyers, this singleton pattern exploits three
important properties:</p>
<ul class="simple">
<li><p>Static function objects are initialized when control flow hits the
function for the first time.</p></li>
<li><p>The lifetime of function static variables begins the first time the
program flow encounters the declaration and ends at program
termination.</p></li>
<li><p>If control enters the declaration concurrently while the variable is
being initialized, the concurrent execution shall wait for completion
of the initialization.</p></li>
</ul>
<p><strong>Note:</strong> It is important to disable both the copy constructor and
assignment operator. The constructor and destructor are not exposed
through the public interface.</p>
<p>Using this pattern guarantees that the single type instance is available
at any point during execution, and that it will be properly destroyed.
This pattern also insures thread-safe initialization. However, there are
pontential thread safety issues with data members of this singleton type.
These are discussed at length in <em>Modern C++ Design: Generic Programming
and Design Patterns Applied</em> by Andrei Alexandrescu.</p>
<p>More explanations about singletons in C++ are
<a class="reference external" href="http://stackoverflow.com/questions/1008019/c-singleton-design-pattern">here</a>.</p>
<p>Here is a more verbose description of static storage duration from the
C++ standard:</p>
<p><em>The zero-initialization of all block-scope variables with static storage
duration or thread storage duration is performed before any other
initialization takes place. Constant initialization of a block-scope
entity with static storage duration, if applicable, is performed before
its block is first entered. An implementation is permitted to perform
early initialization of other block-scope variables with static or
thread storage duration under the same conditions that an implementation
is permitted to statically initialize a variable with static or thread
storage duration in namespace scope. Otherwise such a variable is
initialized the first time control passes through its declaration; such
a variable is considered initialized upon the completion of its
initialization. If the initialization exits by throwing an exception,
the initialization is not complete, so it will be tried again the next
time control enters the declaration. If control enters the declaration
concurrently while the variable is being initialized, the concurrent
execution shall wait for completion of the initialization. If control
re-enters the declaration recursively while the variable is being
initialized, the behavior is undefined.</em></p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Los Alamos National Laboratory, LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Contents caption */
    .wy-menu-vertical>p.caption {
      color: #ffffff;
    }

    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #e3e2db;
    }
    .wy-side-nav-search>div.version, .wy-nav-top>div.version {
      color: #5f5d5f;
    }

    /* Sidebar */
    .wy-nav-side {
      background: #216897;
      color: #ffffff;
    }
  </style>


</body>
</html>