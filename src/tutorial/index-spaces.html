

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Example 3: Index Spaces &mdash; FleCSI 2.-1 (devel) documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  
    <link rel="canonical" href="https://flecsi.orgsrc/tutorial/index-spaces.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/flecsi.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Version: 2.-1 (devel)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../build.html">Build &amp; Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer-guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="http://laristra.github.io/flecsi/doxygen">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">FleCSI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Example 3: Index Spaces</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/src/tutorial/index-spaces.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="example-3-index-spaces">
<h1>Example 3: Index Spaces<a class="headerlink" href="#example-3-index-spaces" title="Permalink to this headline">¶</a></h1>
<p>Index spaces are a fundamental concept of the FleCSI programming model.
In principle, an index space is simply an enumerated set. In practice,
index spaces provide an elegant tool for reasoning about work division
and parallelism. One of the primary capabilities provided by the FleCSI
programming system is the automatic generation of index space iterators
from specializations of the core FleCSI data structures.</p>
<p>In this example, we demonstrate using the index spaces defined on a
simple mesh to iterate over the entities in the mesh. This expands on
the previous tutorial example, which introduced the notion of a data
client. Shown here, perhaps more concretely, is that a data client is a
specialization type that exposes one or more index spaces. In this case,
the data client is a simple mesh that provides an interface to the index
spaces, <em>cells</em>, and <em>vertices</em>. As can be seen in the code example,
users can iterate over these index spaces using straightforward
range-based loop constructs. This is the preferred style for accessing
entities that are defined on a FleCSI data client.</p>
<p>The entity types themselves are defined as part of the specialization.
This allows different specialization developers to use nomenclature and
interfaces that best reflect the intended use of their projects. As an
example, the vertex and cell types defined with our simple mesh both
have <em>print</em> methods that print a user-defined string and the entity’s
id. Although these particular types are relatively trivial, an actual
specialization type may expose interfaces that are arbitrarily complex.</p>
<p>The code for this example can be found in <em>index-spaces.cc</em>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="cp">#include</span><span class="cpf">&lt;flecsi/tutorial/specialization/mesh/mesh.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="cpf">&lt;flecsi/data/data.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="cpf">&lt;flecsi/execution/execution.h&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">flecsi</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">flecsi</span><span class="o">::</span><span class="n">tutorial</span><span class="p">;</span>

<span class="n">flecsi_register_data_client</span><span class="p">(</span><span class="n">mesh_t</span><span class="p">,</span> <span class="n">clients</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

<span class="k">namespace</span> <span class="n">example</span> <span class="p">{</span>

<span class="kt">void</span> <span class="n">simple</span><span class="p">(</span><span class="n">mesh</span><span class="o">&lt;</span><span class="n">ro</span><span class="o">&gt;</span> <span class="n">mesh</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Iterate over the vertices index space</span>

  <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">v</span><span class="p">:</span> <span class="n">mesh</span><span class="p">.</span><span class="n">vertices</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">v</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Hello World! I&#39;m a vertex!&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="c1">// for</span>

  <span class="c1">// Iterate over the cells index space, and then over</span>
  <span class="c1">// the vertices index space.</span>

  <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">c</span><span class="p">:</span> <span class="n">mesh</span><span class="p">.</span><span class="n">cells</span><span class="p">(</span><span class="n">owned</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">c</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Hello World! I am a cell!&quot;</span><span class="p">);</span>

    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="nl">v</span><span class="p">:</span> <span class="n">mesh</span><span class="p">.</span><span class="n">vertices</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">v</span><span class="o">-&gt;</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;I&#39;m a vertex!&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="c1">// for</span>
  <span class="p">}</span> <span class="c1">// for</span>

<span class="p">}</span> <span class="c1">// simple</span>

<span class="c1">// Task registration is as usual...</span>

<span class="n">flecsi_register_task</span><span class="p">(</span><span class="n">simple</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">loc</span><span class="p">,</span> <span class="n">single</span><span class="p">);</span>

<span class="p">}</span> <span class="c1">// namespace example</span>

<span class="k">namespace</span> <span class="n">flecsi</span> <span class="p">{</span>
<span class="k">namespace</span> <span class="n">execution</span> <span class="p">{</span>

<span class="kt">void</span> <span class="n">driver</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Get a data client handle as usual...</span>

  <span class="k">auto</span> <span class="n">m</span> <span class="o">=</span> <span class="n">flecsi_get_client_handle</span><span class="p">(</span><span class="n">mesh_t</span><span class="p">,</span> <span class="n">clients</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

  <span class="c1">// Task execution is as usual...</span>

  <span class="n">flecsi_execute_task</span><span class="p">(</span><span class="n">simple</span><span class="p">,</span> <span class="n">example</span><span class="p">,</span> <span class="n">single</span><span class="p">,</span> <span class="n">m</span><span class="p">);</span>

<span class="p">}</span> <span class="c1">// driver</span>

<span class="p">}</span> <span class="c1">// namespace execution</span>
<span class="p">}</span> <span class="c1">// namespace flecsi</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 Los Alamos National Laboratory, LLC

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

  <style>
    /* Contents caption */
    .wy-menu-vertical>p.caption {
      color: #ffffff;
    }

    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #e3e2db;
    }
    .wy-side-nav-search>div.version, .wy-nav-top>div.version {
      color: #5f5d5f;
    }

    /* Sidebar */
    .wy-nav-side {
      background: #216897;
      color: #ffffff;
    }
  </style>


</body>
</html>